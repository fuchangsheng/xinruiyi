<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<title><empty name="info['id']">添加图片<else/>编辑图片</empty>-图库管理-{$Think.config.webname}</title>
<php>
    $addCss="";
    $addJs="";
    $currentNav ='图库管理 > 添加图片';
</php>
<include file="Common:intohead" />

<link rel="stylesheet" href="/Public/zyUpload/control/css/zyUpload.css" type="text/css">
<!-- 引用核心层插件 -->
<script type="text/javascript" src="/Public/zyUpload/core/zyFile.js"></script>
<!-- 引用控制层插件 -->
<script type="text/javascript" src="/Public/zyUpload/control/js/zyUpload.js"></script>
<!-- 引用初始化JS -->
<style type="text/css">
    .upload_main {  border: 0px solid !important; }
    .status_bar { border-top: 0px solid !important; margin-top: 20px; }
    .upload_preview { border: 0px solid !important;  } 
</style>
</head>
<body>

<div id="">
    <div class="contentArea">
        <input id="path" value="{$path}" type="hidden">
        <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table1">
            <div id="demo" class="demo" ></div>
        </table>

    </div>
</div>
</body>
</html>
<script type="text/javascript">

function checkForm(){
    return true;
    /*var path = $("#path").val();
    if(path==''){
        $("#prompt").text('请选择上传图片！');
        setTimeout(function(){ $("#prompt").text(''); },1000);
        return false;
    }else{
        return true;
    }*/

}


$(function(){
    var item_id = window.parent.document.getElementById("item_id").value;
    
    //$(".status_bar").hidden();
    // 初始化插件
    $("#demo").zyUpload({
        width            :   "100%",                 // 宽度
        height           :   "400px",                 // 宽度
        itemWidth        :   "120px",                 // 文件项的宽度
        itemHeight       :   "100px",                 // 文件项的高度
        url              :   "__MODULE__/Userfiles/upload_product_img/id/"+item_id,  // 上传文件的路径
        multiple         :   true,                    // 是否可以多个文件上传
        dragDrop         :   true,                    // 是否可以拖动上传文件
        del              :   true,                    // 是否可以删除文件
        finishDel        :   false,                   // 是否在上传文件完成后删除预览
        /* 外部获得的回调接口 */
        onSelect: function(files, allFiles){                    // 选择文件的回调方法
            console.info("当前选择了以下文件：");
            console.info(files);
            console.info("之前没上传的文件：");
            console.info(allFiles);
        },
        onDelete: function(file, surplusFiles){                     // 删除一个文件的回调方法
            console.info("当前删除了此文件：");
            console.info(file);
            console.info("当前剩余的文件：");
            console.info(surplusFiles);
        },
        onSuccess: function(file){                    // 文件上传成功的回调方法
            console.info("此文件上传成功：");
            console.info(file);
        },
        onFailure: function(file){                    // 文件上传失败的回调方法
            console.info("此文件上传失败：");
            console.info(file);
        },
        onComplete: function(responseInfo){           // 上传完成的回调方法
            alert(1);
            console.info("文件上传完成");
            console.info(responseInfo);
        }
    });
});

</script>